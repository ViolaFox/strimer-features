<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>–¢–µ—Å—Ç WebSocket MiniChat</title>
    <style>
      body {
        background: #111;
        color: #0f0;
        font-family: monospace;
        padding: 20px;
      }
      #log {
        white-space: pre-wrap;
        background: #000;
        border: 1px solid #0f0;
        padding: 10px;
        max-height: 80vh;
        overflow-y: auto;
      }
    </style>
  </head>
  <body>
    <h2>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MiniChat WebSocket</h2>
    <label>
      –ê–¥—Ä–µ—Å (ws://...):
      <input id="wsUrl" type="text" value="ws://127.0.0.1:8000" size="40" />
    </label>
    <button onclick="connect()">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</button>

    <h3>–õ–æ–≥:</h3>
    <div id="log"></div>

    <script>
      let socket;

      function log(msg) {
        const logDiv = document.getElementById("log");
        logDiv.innerText += msg + "\n";
        logDiv.scrollTop = logDiv.scrollHeight;
      }

      function connect() {
        const url = document.getElementById("wsUrl").value;
        socket = new WebSocket(url);

        socket.onopen = () => log("[‚úÖ] –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ " + url);
        socket.onmessage = (event) => log("[üì©] " + event.data);
        socket.onerror = (err) => log("[‚ùå] –û—à–∏–±–∫–∞: " + err.message);
        socket.onclose = () => log("[‚ö†] –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ");
      }
    </script>
  </body>
</html>
